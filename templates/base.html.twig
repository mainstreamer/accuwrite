<html>
    <head>
        <title>Accuwrite</title>
        <!-- Latest compiled and minified CSS -->
        <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap.min.css" integrity="sha384-BVYiiSIFeK1dGmJRAkycuHAHRg32OmUcww7on3RYdg4Va+PmSTsz/K68vbdEjh4u" crossorigin="anonymous">
        <!-- Optional theme -->
        <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap-theme.min.css" integrity="sha384-rHyoN1iRsVXV4nD0JutlnGaslCJuC7uwjduW9SVrLvRYooPp2bWYgmgJQIXwl/Sp" crossorigin="anonymous">
        <script   src="https://code.jquery.com/jquery-3.2.1.min.js"   integrity="sha256-hwg4gsxgFZhOsEEamdOYGBf13FyQuiTwlAQgxVSNgt4="   crossorigin="anonymous"></script>
        <!-- Latest compiled and minified JavaScript -->

        <link rel="shortcut icon" href="../assets/img/favicon2.png" type="image/x-icon">
        <link rel="stylesheet" href="../assets/css/custom.css">
        <link rel="stylesheet" href="../assets/css/font-awesome.css">

        <link href='https://cdnjs.cloudflare.com/ajax/libs/froala-editor/2.5.1/css/froala_editor.min.css' rel='stylesheet' type='text/css' />
        <link href='https://cdnjs.cloudflare.com/ajax/libs/froala-editor/2.5.1/css/froala_style.min.css' rel='stylesheet' type='text/css' />
        <link href='https://cdnjs.cloudflare.com/ajax/libs/froala-editor/2.5.1/css/plugins/char_counter.min.css' rel='stylesheet' type='text/css' />

        <!-- Include JS file. -->
        {#<script type='text/javascript' src='https://cdnjs.cloudflare.com/ajax/libs/froala-editor/2.5.1/js/froala_editor.min.js'></script>#}
        <script type='text/javascript' src='../assets/js/froala_editor.min.js'></script>
        <script type='text/javascript' src='https://cdnjs.cloudflare.com/ajax/libs/froala-editor/2.5.1/js/plugins/char_counter.min.js'></script>
        <script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/js/bootstrap.min.js" integrity="sha384-Tc5IQib027qvyjSMfHjOMaLkfuWVxZxUPnCJA7l2mCWNIpG9mGCD8wGNIcPD7Txa" crossorigin="anonymous"></script>

    </head>
    <body>
        <div class="jumbotron">
            <div class="page-header">
                <h3>Accuwrite <small> handy spellchecking</small></h3>
            </div>
            <div class="well">
                <textarea id="text" class="froala-editor"></textarea>
            </div>
            <p><a class="button" id="spellcheck" href="#" role="button">Check</a></p>
            <div style="height: 150px!important;">
            &nbsp;
            </div>
            <p>
                <div id="footer">
                    <div class="container">
                        <p><div><a href="https://github.com/mainstreamer/accuwrite"><i class="fa fa-github"></i></a></div>
                            <div class="copyright">Copyright Â© 2017</div>
                        </p>
                    </div>
                </div>
            </p>
        </div>
        <script type='text/javascript' src="../assets/js/ajax.js"></script>
        <script type='text/javascript'>
            
            $(function () {
                $('textarea.froala-editor').froalaEditor({
                })
            });

	     $(document).ready(function () {
                $("a:contains('Unlicensed Froala Editor')").remove();
            });

            $('.show-placeholder').next().hide();
            
            $('#spellcheck').click(function () {
                $('.tooltip').remove();
                var all = $(".fr-element p");
                var arr = [];
                var newString = [];
                var candidates = [];
                var wrdCounter = 0;

                //iterate over P
                for (var q = 0; q < all.length; q++) {
                    newString = '';
                    all[q].innerHTML = all[q].innerHTML.replace('&nbsp;', ' ')
//                    all[q].innerHTML = all[q].innerText;
                }

                for (var j = 0; j < all.length; j++) {
                    newString = '';
                    arr[j] = all[j].innerText.split(" ");
                    for (var i = 0; i < arr[j].length; i++) {

                        if (arr[j][i] == '&nbsp;' || arr[j][i] == ' ') {
                            continue;
                        }
                        wrdCounter++;

                        newString += '<span id=word_' + wrdCounter + '  data-placement="bottom" data-toggle="tooltip">' + arr[j][i] + '</span>  ';
                        candidates[wrdCounter-1] = {id: wrdCounter, value: arr[j][i]};
                    }
                    all[j].innerHTML = newString;
                }

                goCheck(candidates);
            });
        </script>
        <script>
            (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
                        (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
                    m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
            })(window,document,'script','https://www.google-analytics.com/analytics.js','ga');

            ga('create', 'UA-36522987-5', 'auto');
            ga('send', 'pageview');

        </script>
    </body>
</html>
